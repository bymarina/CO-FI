{% extends "base.html" %}
{% block content %}
<div id="app" class="row justify-content-center">
    <div class = "card">
        <div class ="card-body">
            <h5 class="card-title">Create New Coffee Recipe</h5>

            {% if form.errors %}
                <p>Your registration form is invalid. Please correct it and try again.</p>
            {% endif %}
        
            <form method="post" action="{% url 'recipeRegister' %}" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="form-group">
                    {{ form.name.label_tag }}
                    {{ form.name }}
                </div>
                <div class="form-group">
                    <div class="custom-file">
                        {{ form.image }}
                        <label class="custom-file-label" for="id_image" id="id_image-input">Choose file</label>
                    </div>
                </div>
                <div class="form-group">
                    {{ form.coffee.label_tag }}
                    {{ form.coffee }}
                </div>
                <div class="form-group">
                    {{ form.milk.label_tag }}
                    {{ form.milk }}
                </div>
                <div class="form-group">
                    {{ form.chocolate.label_tag }}
                    {{ form.chocolate }}
                </div>
                <div class="form-group">
                    {{ form.cost.label_tag }}
                    {{ form.cost }}
                </div>
                
                <button class="btn btn-primary" type="submit"> Create New Recipe</button>           
            </form>
            
        </div>
    </div>
</div>

<script>
    document.querySelector('.custom-file-input').addEventListener('change',function(e){
        var fileName = document.getElementById("id_image").files[0].name;
        var nextSibling = e.target.nextElementSibling
        nextSibling.innerText = fileName})
</script>

{% endblock %}